<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to concstats • concstats</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="48x48" href="../favicon-48x48.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to concstats">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">concstats</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/concstats-intro.html">Introduction to concstats</a>
    </li>
    <li>
      <a href="../articles/concstats-start.html">Getting started</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropensci/concstats/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to concstats</h1>
                        <h4 data-toc-skip class="author">Andreas
Schneider</h4>
            
            <h4 data-toc-skip class="date">Last updated 2025-07-18</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/concstats/blob/main/vignettes/concstats-intro.Rmd" class="external-link"><code>vignettes/concstats-intro.Rmd</code></a></small>
      <div class="hidden name"><code>concstats-intro.Rmd</code></div>

    </div>

    
    
<p>The goal of the <code>concstats</code> package is to offer a set of
alternative and/or additional measures to better determine a given
market structure and therefore reduce uncertainty with respect to a
given market situation. Various functions or groups of functions are
available to achieve the desired goal.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install <code>concstats</code> directly from CRAN or the
latest development version from github (requires <code>remotes</code> or
<code>devtools</code>) remotes::install_github(“ropensci/concstats”)</p>
<p>Then, load the package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/concstats">concstats</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<p>The following examples use mainly fictitious data to present the
functions. However, if you want to test the functionality in more
detail, the package comes with a small data set of real Paraguayan
credit cooperatives (creditcoops). There are 22 paired observations for
real Paraguayan credit cooperatives (with assets &gt; 11 Mio. USD) for
2016 and 2018 with their respective total loans granted. For a better
visualization there is an additional column with the transformed total
loans. For further information on the data please see the
<code>creditcoops</code> <a href="https://docs.ropensci.org/concstats/reference/creditcoops.html">help</a>
file. For a practical implementation you might be interested to read the
following <a href="https://doi.org/10.1515/zfgg-2022-0002" class="external-link">article</a>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"creditcoops"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">creditcoops</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 5</span></span></span>
<span><span class="co">#&gt;   coop_id year  total_loans paired total_loans_log</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>       1 2016    173<span style="text-decoration: underline;">892</span>358      1            19.0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>       1 2018    199<span style="text-decoration: underline;">048</span>199      1            19.1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>       2 2016    323<span style="text-decoration: underline;">892</span>456      2            19.6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>       2 2018    461<span style="text-decoration: underline;">609</span>439      2            20.0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>       3 2016    179<span style="text-decoration: underline;">981</span>404      3            19.0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>       3 2018    227<span style="text-decoration: underline;">232</span>008      3            19.2</span></span></code></pre></div>
<!--```-->
<!--  # A tibble: 6 x 5                                   -->
<!--  coop_id   year  total_loans paired total_loans_log  -->
<!--    <dbl>   <fct>       <dbl>  <int>           <dbl>  -->
<!--       1    2016    173892358      1            19.0  -->
<!--       1    2018    199048199      1            19.1  -->
<!--       2    2016    323892456      2            19.6  -->
<!--       2    2018    461609439      2            20.0  -->
<!--       3    2016    179981404      3            19.0  -->
<!--       3    2018    227232008      3            19.2  -->
<!--```-->
</div>
<div class="section level2">
<h2 id="group-wrapper-overview">Group wrapper overview<a class="anchor" aria-label="anchor" href="#group-wrapper-overview"></a>
</h2>
<p>At the moment, there are the following groups of functions
available:<br>
- <code><a href="../reference/concstats_mstruct.html">concstats_mstruct()</a></code> is a wrapper for market structure
measures<br>
- <code><a href="../reference/concstats_inequ.html">concstats_inequ()</a></code> is a wrapper for inequality and
diversity measures<br>
- <code><a href="../reference/concstats_comp.html">concstats_comp()</a></code> is a wrapper with different
concentration measures<br>
- <code><a href="../reference/concstats_concstats.html">concstats_concstats()</a></code> is a function which calculates a
set of pre-selected measures in a one step procedure to get a quick
overview of a given market structure</p>
<p>The functions will be presented in more details in the following
short step-by-step guide.</p>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<p>We will use a vector which represents market participants with their
respective market shares (in decimal form):</p>
<div class="section level3">
<h3 id="concstats_mstruct">concstats_mstruct<a class="anchor" aria-label="anchor" href="#concstats_mstruct"></a>
</h3>
<p>The wrapper includes the following arguments to calculate individual
functions: <code>firm</code>, <code>nrs_eq</code>, <code>top</code>,
<code>top3</code>, <code>top5</code>, and <code>all</code>. You can also
pass the additional argument <code>digits</code> to <code>all</code>,
which controls for the number of digits to be printed.<br>
All individual functions can be accessed directly with the prefix
“concstats_” (e.g. “concstats_firm” or “concstats_all_mstruct”). The
concstats_top_df functions also take a data frame as input, since the
ranking of firms and their identification might be of interest.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.35</span>, <span class="fl">0.4</span>, <span class="fl">0.05</span>, <span class="fl">0.1</span>, <span class="fl">0.06</span>, <span class="fl">0.04</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">test_firm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/concstats_firm.html">concstats_firm</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="co"># number of firms</span></span>
<span><span class="va">test_firm</span></span>
<span><span class="co">#&gt; [1] 6</span></span></code></pre></div>
<p>You should have noticed that the market shares are in decimal form.
However, you can use integers or floating point numeric types to express
market shares. All<code>concstats</code> functions will take care of
this and convert theses vectors into decimal form. There are eight
market participants, however, two have no market shares, by default
<code>concstats</code> treats 0 as NA. The result is a cumulative top 5
market share of 96 %.<br>
You can also access each function through their respective argument in
the group wrapper:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.35</span>, <span class="fl">0.4</span>, <span class="fl">0.05</span>, <span class="fl">0.1</span>, <span class="fl">0.06</span>, <span class="fl">0.04</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">test_share_top5</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/concstats_mstruct.html">concstats_mstruct</a></span><span class="op">(</span><span class="va">x</span>, type <span class="op">=</span> <span class="st">"top5"</span><span class="op">)</span> <span class="co"># top3 market shares in %</span></span>
<span><span class="va">test_share_top5</span></span>
<span><span class="co">#&gt; [1] 96</span></span></code></pre></div>
<p>Or, just calculate all measures of the group wrapper, and store it in
a named object.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.35</span>, <span class="fl">0.4</span>, <span class="fl">0.05</span>, <span class="fl">0.1</span>, <span class="fl">0.06</span>, <span class="fl">0.04</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/concstats_all_mstruct.html">concstats_all_mstruct</a></span><span class="op">(</span><span class="va">x</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span>, digits <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt;          Measure Value</span></span>
<span><span class="co">#&gt; 1          Firms  6.00</span></span>
<span><span class="co">#&gt; 2 Nrs_equivalent  3.33</span></span>
<span><span class="co">#&gt; 3        Top (%) 40.00</span></span>
<span><span class="co">#&gt; 4       Top3 (%) 85.00</span></span>
<span><span class="co">#&gt; 5       Top5 (%) 96.00</span></span></code></pre></div>
<p>The result is a data frame of market structure measures.</p>
</div>
<div class="section level3">
<h3 id="concstats_inequ">concstats_inequ<a class="anchor" aria-label="anchor" href="#concstats_inequ"></a>
</h3>
<p>The inequality and diversity group has the following arguments:
<code>entropy</code>, <code>gini</code>, <code>simpson</code>,
<code>palma</code>, <code>grs</code>, and <code>all</code>.</p>
<p>They can also be accessed as individual functions.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.35</span>, <span class="fl">0.4</span>, <span class="fl">0.05</span>, <span class="fl">0.1</span>, <span class="fl">0.06</span>, <span class="fl">0.04</span><span class="op">)</span></span>
<span><span class="va">test_share_entropy</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/concstats_entropy.html">concstats_entropy</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="va">test_share_entropy</span></span>
<span><span class="co">#&gt; [1] 0.787806</span></span>
<span></span>
<span><span class="co"># and as a non-normalized value</span></span>
<span><span class="va">test_share_entropy2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/concstats_entropy.html">concstats_entropy</a></span><span class="op">(</span><span class="va">x</span>, normalized <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">test_share_entropy2</span></span>
<span><span class="co">#&gt; [1] 2.036449</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="concstats_comp">concstats_comp<a class="anchor" aria-label="anchor" href="#concstats_comp"></a>
</h3>
<p>The group wrapper for competition measures includes the following
arguments to calculate <code>hhi</code>, <code>hhi_d</code>,
<code>hhi_min</code>, <code>dom</code>, <code>sten</code>, and
<code>all</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.35</span>, <span class="fl">0.4</span>, <span class="fl">0.05</span>, <span class="fl">0.1</span>, <span class="fl">0.06</span>, <span class="fl">0.04</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">test_share_hhi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/concstats_hhi.html">concstats_hhi</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="va">test_share_hhi</span></span>
<span><span class="co">#&gt; [1] 0.3002</span></span>
<span></span>
<span><span class="co"># a normalized value</span></span>
<span><span class="va">test_share_hhi2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/concstats_hhi.html">concstats_hhi</a></span><span class="op">(</span><span class="va">x</span>, normalized <span class="op">=</span> <span class="cn">TRUE</span>, digits <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">test_share_hhi2</span></span>
<span><span class="co">#&gt; [1] 0.16</span></span>
<span></span>
<span><span class="co"># the min average of the hhi</span></span>
<span><span class="va">test_share_hhi3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/concstats_comp.html">concstats_comp</a></span><span class="op">(</span><span class="va">x</span>, type <span class="op">=</span> <span class="st">"hhi_min"</span><span class="op">)</span></span>
<span><span class="va">test_share_hhi3</span></span>
<span><span class="co">#&gt; [1] 0.1666667</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="concstats_concstats">concstats_concstats<a class="anchor" aria-label="anchor" href="#concstats_concstats"></a>
</h3>
<p>A single function which calculates a set of eight pre-selected
measures in a one step procedure for a first overview of a given market
structure. The resulting data frame contains eight measures, which are:
number of firms with market share, numbers equivalent, the cumulative
share of the top (top 3 and top 5) firm(s) in percentage, the hhi index,
the entropy index, and the palma ratio.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.3</span>, <span class="fl">0.5</span><span class="op">)</span></span>
<span><span class="va">test_share_conc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/concstats_concstats.html">concstats_concstats</a></span><span class="op">(</span><span class="va">x</span>, digit <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">test_share_conc</span></span>
<span><span class="co">#&gt;          Measure  Value</span></span>
<span><span class="co">#&gt; 1          Firms   3.00</span></span>
<span><span class="co">#&gt; 2 Nrs_equivalent   2.63</span></span>
<span><span class="co">#&gt; 3        Top (%)  50.00</span></span>
<span><span class="co">#&gt; 4       Top3 (%) 100.00</span></span>
<span><span class="co">#&gt; 5       Top5 (%) 100.00</span></span>
<span><span class="co">#&gt; 6            HHI   0.38</span></span>
<span><span class="co">#&gt; 7        Entropy   0.94</span></span>
<span><span class="co">#&gt; 8    Palma ratio   2.50</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="visualization">Visualization<a class="anchor" aria-label="anchor" href="#visualization"></a>
</h2>
<p>The scope of the package is to calculate market structure and
concentration measures to get a quick and more informed overview of a
given market situation. However, it is good practice to visualize your
data in an exploratory step or in reporting your results. The package
<code>concstats</code> works fine with other Exploratory Data Analysis
(EDA) packages or data visualization packages e.g. <a href="https://CRAN.R-project.org/package=overviewR" class="external-link"><code>overviewR</code></a>,
<a href="https://CRAN.R-project.org/package=DataExplorer" class="external-link"><code>dataexplorer</code></a>,
<a href="https://CRAN.R-project.org/package=kableExtra" class="external-link"><code>kableExtra</code></a>
or <a href="https://CRAN.R-project.org/package=ggplot2" class="external-link"><code>ggplot2</code></a>
to name a few.</p>
<p>Some examples on how you can accomplish this. Let us assume one would
like to use the group measure for e.g. market structure, and keep the
resulting data frame. We can refine the table using
<code>kableExtra</code> which works nice with <code>knitr</code>.</p>
<p>This time, we will use our <code>creditcoops</code> data set again,
which comes with the package.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"creditcoops"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">creditcoops</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 5</span></span></span>
<span><span class="co">#&gt;   coop_id year  total_loans paired total_loans_log</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>       1 2016    173<span style="text-decoration: underline;">892</span>358      1            19.0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>       1 2018    199<span style="text-decoration: underline;">048</span>199      1            19.1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>       2 2016    323<span style="text-decoration: underline;">892</span>456      2            19.6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>       2 2018    461<span style="text-decoration: underline;">609</span>439      2            20.0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>       3 2016    179<span style="text-decoration: underline;">981</span>404      3            19.0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>       3 2018    227<span style="text-decoration: underline;">232</span>008      3            19.2</span></span></code></pre></div>
<!--```-->
<!--  # A tibble: 6 x 5                                   -->
<!--  coop_id   year  total_loans paired total_loans_log  -->
<!--    <dbl>   <fct>       <dbl>  <int>           <dbl>  -->
<!--       1    2016    173892358      1            19.0  -->
<!--       1    2018    199048199      1            19.1  -->
<!--       2    2016    323892456      2            19.6  -->
<!--       2    2018    461609439      2            20.0  -->
<!--       3    2016    179981404      3            19.0  -->
<!--       3    2018    227232008      3            19.2  -->
<!--```-->
<p>You will need the following two packages. Make sure you have these
packages installed.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/" class="external-link">kableExtra</a></span><span class="op">)</span></span></code></pre></div>
<p>Now, we will filter out data for the year 2016.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#data("creditcoops")</span></span>
<span><span class="va">coops_2016</span> <span class="op">&lt;-</span> <span class="va">creditcoops</span> <span class="op">|&gt;</span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2016</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">coops_2016</span><span class="op">)</span></span>
<span></span>
<span><span class="va">coops_2016</span> <span class="op">&lt;-</span> <span class="va">coops_2016</span><span class="op">[[</span><span class="st">"total_loans"</span><span class="op">]</span><span class="op">]</span> <span class="co"># atomic vector of total loans</span></span>
<span><span class="va">coops_2016</span> <span class="op">&lt;-</span> <span class="va">coops_2016</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">coops_2016</span><span class="op">)</span>  <span class="co"># market shares in decimal form</span></span>
<span></span>
<span><span class="co"># We then use the new object `coops_2016` to calculate the market structure</span></span>
<span><span class="co"># measures as a group in a one-step-procedure and capture the results in a</span></span>
<span><span class="co"># printed table:</span></span>
<span><span class="va">coops_2016_mstruct</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/concstats_mstruct.html">concstats_mstruct</a></span><span class="op">(</span><span class="va">coops_2016</span>, type <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>                                        digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">coops_2016_mstruct_tab</span> <span class="op">&lt;-</span> <span class="va">coops_2016_mstruct</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html" class="external-link">kbl</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Market structure 2016"</span>, digits <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                  booktabs <span class="op">=</span> <span class="cn">TRUE</span>, align <span class="op">=</span> <span class="st">"r"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_classic.html" class="external-link">kable_classic</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">FALSE</span>, html_font <span class="op">=</span> <span class="st">"Arial"</span><span class="op">)</span></span>
<span><span class="va">coops_2016_mstruct_tab</span></span></code></pre></div>
<p>The result is a nice reusable table.</p>
<center>
<p><img src="../articles/mstruct_tab.png" width="400" height="200"></p>
</center>
<p>Now, let’s go a step further. We will compare the two samples for
2016 and 2018. For this purpose, we will select from our
<code>creditcoops</code> data set the relevant columns (coop_id, year,
paired, and total_loans_log) and make a new data frame.</p>
<p>Make sure you have the <code>ggplot2</code> package installed. Load
the package.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span> <span class="co"># Data Visualizations Using the Grammar of Graphics</span></span>
<span></span>
<span><span class="va">df_shares_plot</span> <span class="op">&lt;-</span> <span class="va">df_shares</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">total_loans_log</span>, fill <span class="op">=</span> <span class="va">year</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html" class="external-link">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>group <span class="op">=</span> <span class="va">paired</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Credit cooperatives (type A)"</span>, y <span class="op">=</span> <span class="st">"Total loans (log)"</span>,</span>
<span>       caption <span class="op">=</span> <span class="st">"Source: Andreas Schneider with data from INCOOP"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span>
<span><span class="va">df_shares_plot</span></span></code></pre></div>
<center>
<p><img src="../articles/coops_paired.png" width="469" height="521"></p>
</center>
<p>Having a look a the output, we see a box plot with paired values of
the cooperatives and the evolution of their respective total loans over
time for the two sample years 2016 and 2018.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Andreas Schneider.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer>
</div>






  </body>
</html>
